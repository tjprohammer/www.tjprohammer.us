FROM node:16.14.0-alpine

WORKDIR /server

ARG AWS_ACCESS_KEY_ID
ARG AWS_SECRET_ACCESS_KEY
ARG AWS_REGION

# ARG SENDGRID_API_KEY
# ARG MONGO_PORT
# ARG MONGO_URI

# ENV AWS_ACCESS_KEY_ID ${AWS_ACCESS_KEY_ID}
# ENV AWS_SECRET_ACCESS_KEY ${AWS_SECRET_ACCESS_KEY}
# ENV AWS_REGION ${AWS_REGION}

# ENV SENDGRID_API_KEY ${SENDGRID_API_KEY}
# ENV MONGO_PORT ${MONGO_PORT}
# ENV MONGO_URI ${MONGO_URI}

COPY package.json .

RUN npm install

COPY . .

EXPOSE 5001

CMD ["npm", "run", "start"]